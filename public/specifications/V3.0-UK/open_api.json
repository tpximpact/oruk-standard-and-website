{
  "openapi": "3.0",
  "info": {
    "title": "REQUIRED -- TITLE OF YOUR API HERE",
    "version": "HSDS-UK-3.0",
    "summary": "SUMMARY HERE",
    "description": "DESCRIPTION HERE",
    "contact": {
      "name": "YOUR CONTACT NAME HERE",
      "url": "YOUR CONTACT URL HERE",
      "email": "YOUR CONTACT EMAIL HERE"
    },
    "license": {
      "name": "REQUIRED -- THE LICENSE OF YOUR API",
      "url": "Url to the license used; mutually exclusive to the identifier field if used."
    }
  },
  "jsonSchemaDialect": "https://json-schema.org/draft/2020-12/schema",
  "tags": [
    {
      "name": "Optional",
      "description": "Optional endpoints that may not be implemented by all services"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "name": "API meta info - API & schema validation",
        "description": "Retrieve information about this API and its relationship with HSDS.",
        "summary": "Does the base endpoint return meta information about the API, and does it adhere to the schema",
        "operationId": "getAPIMetaInformation",
        "responses": {
          "200": {
            "description": "A JSON response providing information about this API.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/api_details.json"
                }
              }
            }
          }
        }
      }
    },
    "/services/{id}": {
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "description": "The id of the service that the request is intended to retrieve.",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "name": "Service by id - API & schema validation",
        "description": "Retrieve fully nested service with all related data with id.",
        "summary": "Does the service by id endpoint return a fully nested service in the correct schema",
        "operationId": "getFullyNestedServiceById",
        "responses": {
          "200": {
            "description": "A Service matching the {id}, with all related data according to the HSDS Specification for Service.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/service.json"
                }
              }
            }
          }
        }
      }
    },
    "/services": {
      "get": {
        "name": "Services list - API & schema validation",
        "description": "Retrieves paginated listings of services that only have one-to-one fields in them.",
        "summary": "Does the services list endpoint return a paginated list of services in the correct schema",
        "operationId": "getPaginatedListOfServices",
        "parameters": [
          {
            "$ref": "#/components/parameters/search"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/per_page"
          },
          {
            "$ref": "#/components/parameters/format"
          },
          {
            "$ref": "#/components/parameters/taxonomy_term_id"
          },
          {
            "$ref": "#/components/parameters/taxonomy_id"
          },
          {
            "$ref": "#/components/parameters/organization_id"
          },
          {
            "$ref": "#/components/parameters/modified_after"
          },
          {
            "description": "Return array of just services with just 'id' and 'modified_date'.  When using this parameter aim to return all services within one page.",
            "$ref": "#/components/parameters/minimal"
          },
          {
            "description": "true, false return fully nested service.",
            "$ref": "#/components/parameters/full"
          }
        ],
        "responses": {
          "200": {
            "description": "A paginated list of services that only have one-to-one fields in them.",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "contents": {
                      "type": "array",
                      "items": {
                        "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/service_list.json"
                      }
                    }
                  },
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Page"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/taxonomies/{id}": {
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "description": "The id of the taxonomy that the request is intended to retrieve.",
          "summary": "Does the taxonomy by id endpoint return the full information of a taxonomy in the correct schema",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "tags": ["Optional"],
        "name": "Taxonomy by id - API & schema validation",
        "description": "Full information on taxonomy.",
        "summary": "Retrieves full information on a taxonomy by {id}.",
        "operationId": "getTaxonomyById",
        "responses": {
          "200": {
            "description": "Full information on taxonomy.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/taxonomy.json"
                }
              }
            }
          }
        }
      }
    },
    "/taxonomies": {
      "get": {
        "tags": ["Optional"],
        "name": "Taxonomies list - API & schema validation",
        "description": "Paginated listing of taxonomies.",
        "summary": "Does the taxonomies list endpoint return a paginated list of taxonomies in the correct schema",
        "operationId": "getPaginatedListOfTaxonomies",
        "parameters": [
          {
            "$ref": "#/components/parameters/search"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/per_page"
          },
          {
            "$ref": "#/components/parameters/format"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated listing of taxonomies.",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "contents": {
                      "type": "array",
                      "items": {
                        "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/taxonomy_list.json"
                      }
                    }
                  },
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Page"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/taxonomy_terms/{id}": {
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "description": "The id of the taxonomy terms that the request is intended to retrieve.",
          "summary": "Does the taxonomy term by id endpoint return the full information of a taxonomy term in the correct schema",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "tags": ["Optional"],
        "name": "Taxonomy term by id - API & schema validation",
        "description": "Full information on a taxonomy term.",
        "summary": "Full information on a taxonomy term.",
        "operationId": "getPaginatedListOfTaxonomyTerms",
        "responses": {
          "200": {
            "description": "Full information on a taxonomy term.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/taxonomy_term.json"
                }
              }
            }
          }
        }
      }
    },
    "/taxonomy_terms": {
      "get": {
        "tags": ["Optional"],
        "name": "Taxonomy terms list - API & schema validation",
        "description": "Paginated listing of taxonomy terms",
        "summary": "Does the taxonomy terms list endpoint return a paginated list of taxonomy terms in the correct schema",
        "operationId": "getTaxonomyTermById",
        "parameters": [
          {
            "$ref": "#/components/parameters/search"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/per_page"
          },
          {
            "$ref": "#/components/parameters/format"
          },
          {
            "$ref": "#/components/parameters/taxonomy_id"
          },
          {
            "name": "top_only",
            "in": "query",
            "required": false,
            "description": "Only retrieve taxonomy terms that have not child terms.",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "parent_id",
            "in": "query",
            "required": false,
            "description": "Recieve taxonomy terms that have a parent with this id.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated listing of taxonomy terms",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/taxonomy_term_list.json"
                }
              }
            }
          }
        }
      }
    },
    "/organizations/{id}": {
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "description": "The id of the organization that the request is intended to retrieve.",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "tags": ["Optional"],
        "name": "Organization by id - API & schema validation",
        "description": "Fully nested organization with service array that contains simple information which could only contain the service.id.",
        "summary": "Fully nested organization with service array that contains simple information which could only contain the service.id.",
        "operationId": "getOrganizationById",
        "parameters": [
          {
            "$ref": "#/components/parameters/full_service"
          }
        ],
        "responses": {
          "200": {
            "description": "Fully nested organization with service array that contains simple information which could only contain the service.id.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/organization.json"
                }
              }
            }
          }
        }
      }
    },
    "/organizations": {
      "get": {
        "tags": ["Optional"],
        "name": "Organizations list - API & schema validation",
        "description": "Paginated list of basic Organization information.",
        "summary": "Paginated list of basic Organization information",
        "operationId": "getPaginatedListOfOrganizations",
        "parameters": [
          {
            "$ref": "#/components/parameters/search"
          },
          {
            "$ref": "#/components/parameters/full_service"
          },
          {
            "description": "Contains full nested organization information",
            "$ref": "#/components/parameters/full"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/per_page"
          },
          {
            "$ref": "#/components/parameters/format"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of basic Organization information.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/organization_list.json"
                }
              }
            }
          }
        }
      }
    },
    "/service_at_locations/{id}": {
      "parameters": [
        {
          "in": "path",
          "name": "id",
          "required": true,
          "description": "The id of the service that the request is intended to retrieve.",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "tags": ["Optional"],
        "name": "Service at location by id - API & schema validation",
        "description": "Retrieve fully nested service_at_location with all related data with specified id.",
        "summary": "Does the service at location by id endpoint return a fully nested service at location in the correct schema",
        "operationId": "getServiceAtLocationWithNestedDataById",
        "responses": {
          "200": {
            "description": "Retrieve fully nested service_at_location with all related data with specified id.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/service_at_location.json"
                }
              }
            }
          }
        }
      }
    },
    "/service_at_locations": {
      "get": {
        "tags": ["Optional"],
        "name": "Service at locations list - API & schema validation",
        "description": "Retrieve paginated listings of service_at_location that only have one-to-one fields in them.",
        "summary": "Does the service at locations list endpoint return a paginated list of service at locations in the correct schema",
        "operationId": "getPaginatedListOfServiceAtLocation",
        "parameters": [
          {
            "$ref": "#/components/parameters/search"
          },
          {
            "$ref": "#/components/parameters/taxonomy_term_id"
          },
          {
            "$ref": "#/components/parameters/taxonomy_id"
          },
          {
            "$ref": "#/components/parameters/organization_id"
          },
          {
            "$ref": "#/components/parameters/modified_after"
          },
          {
            "description": "true, false return fully nested service_at_location.",
            "$ref": "#/components/parameters/full"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/per_page"
          },
          {
            "$ref": "#/components/parameters/format"
          },
          {
            "$ref": "#/components/parameters/postcode"
          },
          {
            "$ref": "#/components/parameters/proximity"
          }
        ],
        "responses": {
          "200": {
            "description": "Retrieve paginated listings of service_at_location that only have one-to-one fields in them.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "https://raw.githubusercontent.com/tpximpact/OpenReferralApi/refs/heads/main/OpenReferralApi/Schemas/V3.0-UK/service_at_location_list.json"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Page": {
        "type": "object",
        "properties": {
          "total_items": {
            "type": "integer",
            "description": "Count of total results."
          },
          "total_pages": {
            "type": "integer",
            "description": "Count of total pages."
          },
          "page_number": {
            "type": "integer",
            "description": "Current page number."
          },
          "size": {
            "type": "integer",
            "description": "Size of current page."
          },
          "first_page": {
            "type": "boolean",
            "description": "Is this page the first page."
          },
          "last_page": {
            "type": "boolean",
            "description": "Is this page the last page."
          },
          "empty": {
            "type": "boolean",
            "description": "Is this page empty."
          }
        }
      }
    },
    "parameters": {
      "search": {
        "name": "search",
        "in": "query",
        "required": false,
        "description": "Full text search.",
        "schema": {
          "type": "string"
        }
      },
      "page": {
        "name": "page",
        "in": "query",
        "required": false,
        "description": "Page number of paginated result.",
        "schema": {
          "type": "integer"
        }
      },
      "per_page": {
        "name": "per_page",
        "in": "query",
        "required": false,
        "description": "Number of results requested in a single page.",
        "schema": {
          "type": "integer"
        }
      },
      "minimal": {
        "name": "minimal",
        "in": "query",
        "required": false,
        "description": "Return array of just service 'id' and 'modified_date'.  When using this parameter aim to return all services within one call.",
        "schema": {
          "type": "boolean"
        }
      },
      "full": {
        "name": "full",
        "in": "query",
        "required": false,
        "description": "Return a fully nested service, service_at_location, or organization based on the request.",
        "schema": {
          "type": "boolean"
        }
      },
      "modified_after": {
        "name": "modified_after",
        "in": "query",
        "required": false,
        "description": "Return all results modified on or after this datetime.",
        "schema": {
          "type": "string",
          "format": "datetime"
        }
      },
      "taxonomy_term_id": {
        "name": "taxonomy_term_id",
        "in": "query",
        "required": false,
        "description": "Search for services with particular taxonomy_term.",
        "schema": {
          "type": "string"
        }
      },
      "taxonomy_id": {
        "name": "taxonomy_id",
        "in": "query",
        "required": false,
        "description": "Search for services which contain any term with this taxonomy.",
        "schema": {
          "type": "string"
        }
      },
      "organization_id": {
        "name": "organization_id",
        "in": "query",
        "required": false,
        "description": "Search for services which contain services that that this organization provides.",
        "schema": {
          "type": "string"
        }
      },
      "full_service": {
        "name": "full_service",
        "in": "query",
        "required": false,
        "description": "Fully nested organization with service array that contains full service information.",
        "schema": {
          "type": "boolean"
        }
      },
      "postcode": {
        "name": "postcode",
        "in": "query",
        "required": false,
        "description": "The postcode or zip code of a point used to check service coverage. If `service_area` is available, only return results where the postcode exists within the `service_area`.  If `proximity` is provided, only show results within the proximity from the centroid of the postcode.",
        "schema": {
          "type": "string"
        }
      },
      "proximity": {
        "name": "proximity",
        "in": "query",
        "required": false,
        "description": "Return services that exist within meters from the centroid of the provided postcode",
        "schema": {
          "type": "string"
        }
      },
      "format": {
        "name": "format",
        "in": "query",
        "required": false,
        "description": "Return results in the specified format. Default is `json`. Could be `ndjson` which should stream all the results without pagination.",
        "schema": {
          "type": "string"
        }
      }
    }
  }
}
